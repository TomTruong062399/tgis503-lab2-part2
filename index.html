<html>
  <head>
	   <title>Ballot Boxes in King County</title>
     <link rel="stylesheet" href="styles.css" type="text/css">
     <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">
	   <!-- the Leaflet CSS -->
	   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"/>
	   <!-- the Leaflet JavaScript library -->
	   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
     <!-- the JQuery library -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
     <!-- the Chroma library -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
  </head>

  <body>
    <h1>Ballot Boxes In King County, WA in 2020</h1>


	   <!-- code where we create and name the container that holds the map -->
	   <div id="map"></div>

	   <!-- code where we build the map and its functionality -->
	   <script>
		 var mymap = L.map('map', {
       center: [47.4807542,-122.0419847],
       zoom: 10,
       maxZoom: 15,
       minZoom: 8,
       detectRetina: true
     });

		 var basemap = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png', {
		     attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a> | King County Data <a href="https://gis-kingcounty.opendata.arcgis.com/datasets/ballot-drop-boxes-in-king-county-ballot-dropbox-point">Ballot Boxes</a> <a href="https://gis-kingcounty.opendata.arcgis.com/datasets/voting-districts-of-king-county-votdst-area">Voting Districts</a> | Icon <a href="https://thenounproject.com/">Noun Project</a>',
		     }).addTo(mymap);

    // load GeoJSON from an external file and add it to the map
    $.getJSON("data/Ballot_Drop_Boxes_in_King_County___ballot_dropbox_point.geojson",function(data){
      L.geoJson(data, {
        pointToLayer: function(feature, latlng){
          var marker = L.marker(latlng, {
            icon: L.icon({
              iconUrl: 'icon.png',
              iconSize: [15, 15]
            })
          });
          marker.bindPopup("<u>Location</u>: " + feature.properties.ABB_NAME +
                            "<br><u>Address</u>: " + feature.properties.ADDRESS + " " +
                            feature.properties.CITYZIP + ", WA " + feature.properties.ZIPCODE +
                            "<br><u>Driveup?</u>: " + feature.properties.DRIVEUP);
          return marker;
        }
      }).addTo(mymap);
    });

    var colors = chroma.scale('Reds').mode('lch').colors(9);


    var style = {
      //fillColor: getColor(feature.properties.SUM_VOTERS),
      opacity: 0.5,
      weight: 1
    };

    $.getJSON("data/Voting_Districts_of_King_County___votdst_area.geojson",function(data){
      L.geoJson(data, {
        style: style}).addTo(mymap);
    });

    </script>
  </body>
</html>
